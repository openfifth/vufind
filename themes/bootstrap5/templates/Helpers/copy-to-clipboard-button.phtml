<?php
  $this->buttonNumber ??= bin2hex(random_bytes(5));
  $buttonAttributes = [
    'type' => 'button',
    'class' => ['btn', 'hidden', 'copy-to-clipboard-button', 'toolbar-btn'],
    'role' => 'button',
    'tabindex' => '0',
    'data-number' => $this->buttonNumber,
    'data-target' => $this->selector,
  ];
  $buttonText = $this->icon('clone');
  if ($this->hideButtonText) {
    $buttonAttributes['title'] = $this->transEscAttr('copy_to_clipboard_button_label');
  }
?>
<span class="copy-to-clipboard">
  <button<?=$this->htmlAttributes($buttonAttributes)?>>
    <?=$this->icon('clone')?>
    <span class="icon-link__label <?=$this->hideButtonText ? 'visually-hidden' : ''?>">
      <?=$this->transEsc('copy_to_clipboard_button_label')?>
    </span>
  </button>
  <span id="copySuccessMessage<?=$this->buttonNumber?>" class="hidden">
    <span class="copyMessage text-success"><small><?=$this->translate('copy_to_clipboard_success_message')?></small></span>
  </span>
  <span id="copyFailureMessage<?=$this->buttonNumber?>" class="hidden">
    <span class="copyMessage text-danger"><small><?=$this->translate('copy_to_clipboard_failure_message')?></small></span>
  </span>
</span>
